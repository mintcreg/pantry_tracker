<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pantry Manager</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
    <!-- Include QuaggaJS locally -->
    <script src="static/js/quagga.min.js"></script>
</head>
<body>

<div class="container">
    <h1>Pantry Manager</h1>

    <div class="category-buttons">
        <button onclick="showTab('products')">Products</button>
        <button onclick="showTab('categories')">Categories</button>
        <!-- Changed this from an anchor link to a styled button-like link -->
        <a href="{{ url_for('backup_page') }}" class="additional-buttons">Backup & Restore</a>
    </div>

    <!-- Categories Tab -->
    <div id="categories-container">
        <div id="categories-content"></div>
    </div>

    <!-- Products Tab -->
    <div id="products-container" class="hidden">
        <h2>Create Categories and Products</h2>
        <div class="generate-form">
            <div class="form-section">
                <h3>Categories</h3>
                <div id="category-rows"></div>
                <button class="add-row-btn green-btn" onclick="addCategoryRow()">Add Category</button>
            </div>
            <div class="form-section">
                <h3>Products</h3>
                <div id="product-rows"></div>
                <button class="add-row-btn green-btn" onclick="addProductRow()">Add Product</button>
            </div>
        </div>
        <button class="generate-btn" onclick="saveEntities()">Save</button>
    </div>

	<!-- Attribution Section -->
	<div class="attribution">
		<p>
			Powered by data from <a href="https://world.openfoodfacts.org" target="_blank" rel="noopener noreferrer">OpenFoodFacts</a>.
			Built with the assistance of <a href="https://openai.com" target="_blank" rel="noopener noreferrer">ChatGPT by OpenAI</a>.
		</p>
	</div>
	</div>

<!-- Edit Category Modal -->
<div id="edit-category-modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditCategoryModal()">&times;</span>
        <h2>Edit Category</h2>
        <input type="hidden" id="edit-category-old-name">
        <input type="text" id="edit-category-input" class="input-field" placeholder="New Category Name">
        <button class="save-btn" onclick="saveEditedCategory()">Save Changes</button>
    </div>
</div>

<!-- Edit Product Modal -->
<div id="edit-product-modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeEditProductModal()">&times;</span>
        <h2>Edit Product</h2>
        <input type="hidden" id="edit-product-old-name">
        <input type="text" id="edit-product-name" class="input-field" placeholder="New Product Name">
        <select id="edit-product-category" class="input-field">
            <option value="">Select Category</option>
            <!-- Dynamically populate categories -->
            <!-- Example: -->
            <!-- <option value="Fruits">Fruits</option> -->
        </select>
        <input type="text" id="edit-product-url" class="input-field" placeholder="New Image URL">
        <input type="text" id="edit-product-barcode" class="input-field" placeholder="New Barcode (Optional)">
        <button class="save-btn" onclick="saveEditedProduct()">Save Changes</button>
    </div>
</div>

<!-- Barcode Scanner Modal -->
<div id="barcode-modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeBarcodeModal()">&times;</span>
        <h2>Scan Barcode</h2>
        <div id="loading-spinner" style="display: none;">Loading...</div>
        <div id="barcode-scanner" style="width: 100%; height: 400px;"></div>
    </div>
</div>



<!-- Include the script at the end of the body -->
<script src="static/app.js"></script>
</body>
</html>
